name: Users RELEASE

on:
  push:
    tags: [ '*' ]

jobs:
  check-tag:
    name: Check tag
    runs-on: ubuntu-latest
    steps:
      - name: 'Checkout source code'
        uses: actions/checkout@v2
        with:
          ref: 'main'
      - uses: actions/setup-node@v2
        with:
          node-version: 14
      - name: get-npm-version
        id: package_version
        run: echo ::set-output name=version::$(npm run version --silent)
      - name: Check tag name
        uses: actions/github-script@v5
        with:
          script: |
            console.log('${{ github.ref_name }}')
            console.log('${{ steps.package_version.outputs.version }}')
            if (${{ github.ref_name != steps.package_version.outputs.version }}) {
              core.setFailed('Tag does not match with package version')
            }